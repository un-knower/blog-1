---
title: 项目构建与部署
date: 2017-06-14 14:05:00
tags: 
    - maven
    - sbt
toc: true
---

[TOC]

## 项目构建

### maven

#### Maven Lifecycle
1. Maven is implemented based around the concept of a build lifecycle. 
2. The stages of a lifecycle are called phases. In each phase, one or more goals can be executed
3. Maven has three built-in build lifecycles:
    - default: The default lifecycle handles project build and deployment
        + validate: This phase validates that all project information is available and correct
        + process-resources: This phase copies project resources to the destination to package
        + compile: This phase compiles the source code
        + test: This phase runs unit tests within a suitable framework
        + package: This phase packages the compiled code in its distribution format
        + integration-test: This phase processes the package in the integration test environment
        + verify: This phase runs checks to verify that the package is valid
        + install: This phase installs the package in the local repository
        + deploy: This phase installs the final package in the configured repository
    - clean: The clean lifecycle cleans up the fles and folders produced by Maven
        + The clean phase removes all the fles and folders created by Maven as part of its build
    - site: The site lifecycle handles the creation of project documentation
        + The site phase generates the project's documentation, which can be published, as well as a template that can be customized further 
4. Each phase is made up of plugin goals. A plugin goal is a specifc task that builds the project.

|Phase |Plugin |Goal|
|:--|:--|:--|
|clean |Maven Clean plugin|clean|
|site |Maven Site plugin|site|
|process-resources |Maven Resources plugin|resource|
|compile |Maven Compiler plugin|compile|
|test |Maven Surefire plugin|test|
|package |Varies based on the packaging; for instance, the Maven JAR plugin|jar (in the case of a Maven JAR plugin)|
|install |Maven Install plugin |install|
|deploy |Maven Deploy plugin |deploy| 
<br>

#### Maven Plugins

##### Maven Clean plugin
- build tools generate artifacts in a well-defned folder, namely the target folder, called project working directory. Before a new build, this folder is usually deleted
- $mvn clean
- How it works
    + invoke clean phase
    + invoke clean lifecycle
    + uses the Maven Clean plugin for this
    + plugin has only one goal, namely clean, to clean the working directory
- Cleaning automatically
``` xml
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-clean-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <id>auto-clean</id>
                        <phase>initialize</phase>
                        <goals>
                            <goal>clean</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
```
- Skipping the deletion of the working directory
``` xml
    <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.6</version>
        <configuration>
            <skip>true</skip>
        </configuration>
    </plugin>
```
- Deleting additional folders/fles
``` xml
    <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.6</version>
        <configuration>
            <filesets>
                <fileset>
                    <directory>${basedir}/report</directory>
                </fileset>
            </filesets>
        </configuration>
    </plugin>
```

##### Compiler plugin
- Compilation is an essential task performed by a build tool. This compiles the Java source fles to classes in the target/classes folder
- $mvn compile
- How it works
    + compile phase
    + compile goal 
    + Maven Compiler plugin
- ompile phase not compile the test sources, if want
    + $mvn test 
    + As we specifed the test phase, Maven ran all phases prior to it, which includes compiling the test sources using the testCompile goal of the Maven Compiler plugin

##### Changing the compiler used by the Maven Compiler plugin
``` xml
    <properties>
        <JAVA8.HOME>C:/ProgramFiles/Java/jdk1.8.0_20</JAVA8.HOME>
    </properties>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.2</version>
            <configuration>
                <verbose>true</verbose>
                <fork>true</fork>
                <executable>${JAVA8.HOME}/bin/javac</executable>
                <compilerVersion>1.8</compilerVersion>
            </configuration>
        </plugin>
    </plugins>
```

##### - Specifying the Java version for the Compiler plugin
``` xml
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.2</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>

    <properties>
        <maven.compiler.target>1.8</maven.compiler.target>
        <maven.compiler.source>1.8</maven.compiler.source>
    </properties>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.2</version>
        <configuration>
            <compilerArgument>-Xlint:deprecation</compilerArgument>
        </configuration>
    </plugin>
```

##### Using the Maven Surefre plugin to run unit tests
A best practice of software development is writing automated unit tests for the code that you develop.
- How it works
    + test phase
    + test goal
    + Maven Surefre plugin

##### Using the Maven Failsafe plugin to run integration tests
``` xml
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-failsafe-plugin</artifactId>
        <version>2.18</version>
        <executions>
            <execution>
                <id>integration-tests</id>
                <goals>
                    <goal>integration-test</goal>
                    <goal>verify</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
```
- $mvn verify
- How it works
    + verify phase
    + verify goal
    + Maven Failsafe plugin

##### Using the Maven Resources plugin
The Resources plugin comes into picture to copy project resources to the output directory. The resources can be for the project to run or for the purpose of testing
- $mvn process-resources
- How it works
    + process-resources phase
    + resources goal
    + maven-resources-plugin
- The Maven Resources plugin allows us to confgure these additional folders.
``` xml
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
            </resource>
            <resource>
                <directory>src/main/additional</directory>
            </resource>
        </resources>
    </build>
```

##### Filtering using resources
let us see how we can put the resources features of Maven to good use, that is, to perform variable replacements on project resources. This feature is useful when you need to parameterize a build with different confguration values, depending on the deployment platform
- Add a property with a variable in the src/main/resource/app.properties fle: display.name=Hello ${project.name}
- add resource
``` xml
    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
    </build>
```
- $mvn process-resources
- $type app.properties display.name=Hello Project with resource filtering
- How it works
    + set the filtering element to true
    + Maven replaced the variable ${project.name} with the property value corresponding to the name of the project defned in the pom fle
- You can override the property values from the command line:$mvn –Dproject.name="Override from command line" process-resources
- $type target\classes\app.properties display.name=Hello Override from command line
``` xml
    <filters>
        <!-- 
         | large number of variables whose values differ based on the environment
         | create a fle, say my-filter-values.properties
         | in the project codebase holding the keys and values (say, src/filter folder) and use them as flters
         -->
        <filter>my-filter-values.properties</filter>
    </filters>
```

##### Using IntelliJ IDEA to run Maven goals

<br>
<br>
#### Dependency Management
One of the powerful features of Maven is managing the dependencies required by the project.

##### Choosing the scope of dependency
Some of them may be required to compile and run the projects. There might be others only to run tests (for instance, junit). Then there may be dependencies that are required at runtime, say logback.
``` xml
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
```
- $mvn compile
- $mvn test
- By default, the scope is compile.
    + compile: This dependency is required for compilation. This automatically means it is required for testing as well as runtime (when the project is run).
    + test: This dependency is only required for tests. This means the dependency is typically in the test code. As the test code is not used to run the project, these dependencies are not required for runtime.
    + runtime: These dependencies are not required during compilation, but only required to run the project. One example would be the logback dependency if you are using Simple Logging Facade for Java (slf4j) to log and want to use logback binding.
    + provided: This tells Maven that dependency is required for compilation and runtime, but this dependency need not be packaged with the package for distribution. The dependency will be provided by the user. An example of this dependency is servlet-api. Typically, application servers have these libraries.
    + system: This is similar to the provided scope. Here, we need to explicitly provide the location of the JAR fle. It is not looked up from the repository. This may be useful to specify a dependency that is not present in the repository:
``` xml
    <dependency>
        <groupId>com.myorg</groupId>
        <artifactId>some-jar</artifactId>
        <version>2.0</version>
        <scope>system</scope>
        <systemPath>${basedir}/lib/some.jar</systemPath>
    </dependency>
```
    + import: This is only used on a dependency of the pom type in the dependencyManagement section. It indicates that the specifed pom should be replaced with the dependencies in that pom's dependencyManagement section. This is intended to centralize dependencies of large multi-module projects.
- The Manually installing dependencies that are not available in a repository recipe in this chapter

##### Getting a report of dependencies
It is useful to get a list of dependencies for a Maven project in order to identify and troubleshoot problems. 
- $mvn dependency:list
- $mvn dependency:tree

##### Getting into dependency and avoiding dependency hell依赖地狱
- $mvn dependency:tree -Dverbose
- Maven does a dependency analysis. This reveals two things:
    + Two or more dependencies require the same version of another dependency. Maven includes a dependency only once.
    + Two or more dependencies require a different version of another dependency.
- Maven provides another way to handle the preceding scenario, namely, by using the dependencyManagement element.
- There is no magic bullet to prevent dependency hell.

##### Downloading dependencies into a folder
Some projects may have a requirement for all the dependencies to be made available, say, in a folder. This could be to archive the dependencies used in a particular version of the build.
- download dependencies in the target/dependency folder:$mvn dependency:copy-dependencies 
- $mvn dependency:copy-dependencies -DoutputDirectory=dependencies
- $mvn dependency:copy-dependencies -Dmdep.copyPom=true Dmdep.useRepositoryLayout=true

##### Understanding SNAPSHOT dependencies
In Maven, a SNAPSHOT version is a version of the project/dependency that has not been released. This is indicated by suffxing SNAPSHOT to the version number. 
- eg: <version>1.0-SNAPSHOT</version>
- $mvn verify
- <updatePolicy>always|daily|interval:X<updatePolicy>

##### Handling dependency download errors
- $mvn verify
- Maven frst downloads the pom fle of the dependency. It analyzes the pom fle and recursively downloads the transitive dependencies specifed there. It then downloads the actual dependency fle, typically, a JAR fle

##### Detecting unused/undeclared dependencies
- $mvn dependency:analyze

##### Manually installing dependencies that are not available in a repository
- $mvn install:install-file -DgroupId=groupId_self -DartifactId=artifactId_self -Dversion=version_self -Dpackaging=tar.gz -Dfile=filepath -DgeneratePom=true
``` xml
    <repository>
        <id>in-project-repo</id>
        <releases>
            <checksumPolicy>ignore</checksumPolicy>
        </releases>
        <url>file://${project.basedir}/lib</url>
    </repository>
```
- mvn install:install-file -DgroupId=artifactId_self -DartifactId=apache-tomcat -Dversion=version_self -Dpackaging=tar.gz -Dfile=filepath -DgeneratePom=true -DlocalRepositoryPath=lib

##### Dependency management using IntelliJ IDEA

<br>
<br>
#### Code Quality Plugins
##### Analyzing code coverage with the Maven JaCoCo plugin
``` xml
    <plugin>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <version>0.7.2.201409121644</version>
        <executions>
            <execution>
                <id>default-prepare-agent</id>
                <goals>
                    <goal>prepare-agent</goal>
                </goals>
            </execution>
            <execution>
                <id>default-report</id>
                <phase>prepare-package</phase>
                <goals>
                    <goal>report</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
```
- How it works
    + prepare-agent: This is bound by default to the initialize phase of the Maven default lifecycle. The goal runs and prepares the agent that does the analysis.
    + report: This agent gathers test coverage information when the tests are run and creates the report as part of the prepare-package phase (which we have explicitly specifed).
- You could subject the project to code coverage and generate the same report without making any changes to the pom fle. To do this, run the following command:
    + $mvn jacoco:prepare-agent test jacoco:report
    + $mvn org.jacoco:jacoco-maven-plugin:prepare-agent test org.jacoco:jacoco-maven-plugin:report
``` xml
    <execution>
        <id>default-check</id>
        <phase>prepare-package</phase>
        <goals>
            <goal>check</goal>
        </goals>
        <configuration>
            <rules>
                <rule>
                    <element>BUNDLE</element>
                    <limits>
                        <limit>
                            <counter>COMPLEXITY</counter>
                            <value>COVEREDRATIO</value>
                            <minimum>0.60</minimum>
                        </limit>
                    </limits>
                </rule>
            </rules>
        </configuration>
    </execution>
```

##### Analyzing code coverage with the Maven Cobertura plugin
- $mvn cobertura:cobertura
``` xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.6</version>
        <configuration>
            <check>
                <branchRate>85</branchRate>
                <lineRate>85</lineRate>
                <haltOnFailure>true</haltOnFailure>
            </check>
        </configuration>
        <executions>
            <execution>
                <goals>
                    <goal>check</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
```
- mvn cobertura:check

##### Analyzing code with the Maven PMD plugin
PMD is a source code analyzer. It fnds common programming ﬂaws such as unused variables, empty catch blocks, and unnecessary object creation. It also includes the Copy/Paste Detector (CPD) that fnds duplicated code.
- $mvn pmd:pmd pmd:cpd
``` xml ruleset
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>3.4</version>
                <configuration>
                    <rulesets>
                        <!-- Two rule sets that come bundled with PMD -->
                        <ruleset>/rulesets/java/braces.xml</ruleset>
                        <ruleset>/rulesets/java/naming.xml</ruleset>
                        <!-- Custom local file system rule set -->
                        <ruleset>d:\rulesets\strings.xml</ruleset>
                        <!-- Custom remote rule set accessed via a URL -->
                        <ruleset>http://localhost/design.xml</ruleset>
                    </rulesets>
                </configuration>
            </plugin>
        </plugins>
    </reporting>
```

``` xml
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>3.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>check</goal>
                            <goal>cpd-check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
```
- $mvn verify

##### Analyzing code with the Maven Checkstyle plugin
- $mvn checkstyle:checkstyle
``` xml Checkstyle rules
    <configuration>
        <checkstyleRules>
            <module name="Checker">
                <module name="TreeWalker">
                    <module name="FinalLocalVariable">
                        <property name="tokens" value="VARIABLE_DEF,PARAMETER_DEF"/>
                    </module>
                </module>
            </module>
        </checkstyleRules>
    </configuration>

    <!-- They can also be specifed in an external fle and referred using the configLocation element:-->
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.14</version>
        <configuration>
            <configLocation>checkstyle.xml</configLocation>
        </configuration>
    </plugin>

    <!--A Suppressions flter can be created to tell Checkstyle not to report violations on specifc fles and specifc sections of the fles:-->
    <suppressions>
        <suppress checks="JavadocStyleCheck"
                  files="GeneratedObject.java"
                  lines="50-9999"/>
        <suppress checks="MagicNumberCheck"
                  files="LegacyDatasetConvertor.java"
                  lines="221,250-295"/>
    </suppressions>
```

``` xml
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.14</version>
                <executions>
                    <execution>
                        <id>verify-style</id>
                        <phase>process-sources</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
```

##### Analyzing code with the Maven FindBugs plugin
FindBugs is another tool that uses static analysis to inspect Java bytecode for bugs in a Java code. It is based on the concept of bug patterns. A bug pattern is a code snippet that is often an error.
- $mvn clean compile findbugs:findbugs
- Filter bugs to report: This plugin allows us to specify classes and methods that can be included or excluded from reporting:
``` xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>3.0.1-SNAPSHOT</version>
        <configuration>
            <excludeFilterFile>findbugsexclude.xml</excludeFilterFile>
            <includeFilterFile>findbugsinclude.xml</includeFilterFile>
        </configuration>
    </plugin>
```
- Bug detectors to run: We can also specify which detectors to run. This can be done in the following manner:
``` xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>3.0.1-SNAPSHOT</version>
        <configuration>
            <visitors>FindDeadLocalStores,UnreadFields</visitors>
        </configuration>
    </plugin>
```
- mvn compile findbugs:findbugs findbugs:gui

##### Generating source references with the Maven JXR plugin
- $mvn jxr:jxr
- $mvn jxr:jxr checkstyle:checkstyle

##### Analyzing code with the Maven SonarQube plugin
SonarQube is a platform to manage code quality. It is a web-based application, where rules, alerts, thresholds, and other metrics can be confgured. It provides various ways to analyze code. The results of the analysis can then be viewed in a web application.
- Let's brieﬂy discuss some basic requirements for using the Maven SonarQube plugin:
    + Visit the download page for SonarQube at http://www.sonarqube.org/downloads/.
    + Download the latest release.
    + Unzip the ZIP fle to a folder of your choice.
    + Based on the platform, start the server by following the instructions.
    + Confrm that the server is running by visiting the web page at http://localhost:9000/ (assuming it's a default installation)
- $mvn sonar:sonar


<br>
<br>
#### Reporting and Documentation
 Maven is the ability to create documentation for the project.
##### Documenting with the Maven Site plugin
- $mvn site
``` xml
    <reporting>
        <plugins>
            <plugin>
                <artifactId>maven-project-info-reports-plugin</artifactId>
                <version>2.0.1</version>
                <reportSets>
                    <reportSet></reportSet>
                </reportSets>
            </plugin>
        </plugins>
    </reporting>
```
- customizations
    + Create a different documentation format: The default format of the site is APT (almost plain text), a wiki-like format
    + Override the default navigation tree: This is required if you want to insert additional content in the site
    + Creating skins: This is needed if you want to style the site reports differently
1. Add the site.xml fle with the following content to the src\site folder
``` xml site.xml
    <project xmlns="http://maven.apache.org/DECORATION/1.6.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://maven.apache.org/DECORATION/1.6.0 http://maven.apache.org/xsd/decoration-1.6.0.xsd"
             name="Project with Documentation">
        <bannerLeft>
            <name>Left Banner</name>
            <src>images/packt.png</src>
            <href>http://www.packtpub.com</href>
        </bannerLeft>
        <body>
            <menu name="Project with Documentation">
                <item name="Overview" href="index.html"/>
            </menu>
            <menu ref="reports"/>
        </body>
    </project>
```
2. Add the image named packt.png to the src\site\resources\images folder.
3. Now, add the index.apt fle in the src\site\apt folder with the following content:Welcome to Project with Documentation.
4. $mvn clean site

##### Generating Javadocs for a site
Documentation for Java projects is created using Javadocs. Maven provides support not only to generate Javadocs, but also to publish them as part of the site. 
``` xml pom.xml
    <reporting>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <version>2.10.1</version>
            </plugin>
        </plugins>
    </reporting>
```
- $mvn site

##### Generating source cross-reference for a site
``` xml pom.xml
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jxr-plugin</artifactId>
        <version>2.5</version>
    </plugin>
```

##### Generating unit test reports for a site
``` xml pom.xml
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-report-plugin</artifactId>
        <version>2.18</version>
    </plugin>
```

##### Generating code coverage reports for a site
- Add the following code in the <build> section of the pom.xml fle:
- Add the following code in the reporting section of the pom.xml fle:

##### Generating code quality reports for a site
- Add the following code to the reporting section of the pom.xml fle:
``` xml pom.xml
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <version>3.3</version>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.13</version>
    </plugin>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>3.0.0</version>
    </plugin>
```

##### Generating selective reports


<br>
<br>
#### Handling Typical Build Requirements

##### Including and excluding additional resources
- Add the following to the build section of your pom fle:
``` xml
    <resources>
        <resource>
            <directory>src/resources/xml</directory>
            <includes>
                <include>*.xml</include>
            </includes>
        </resource>
        <resource>
            <directory>src/resources/json</directory>
            <includes>
                <include>include.json</include>
            </includes>
            <excludes>
                <exclude>exclude.json</exclude>
            </excludes>
        </resource>
    </resources>

    <testResources>
        <testResource>
            <directory>src/resources/xml</directory>
            <includes>
                <include>*.xml</include>
            </includes>
        </testResource>
        <testResource>
            <directory>src/resources/json</directory>
            <includes>
                <include>include.json</include>
            </includes>
            <excludes>
                <exclude>exclude.json</exclude>
            </excludes>
        </testResource>
    </testResources>    
```
- $mvn resources:resources
- $mvn resources:testResources
- We saw that the resources and testResources goals copied resources to classes and test-classes respectively. What if we need to copy these to specifc folders
``` xml pom.xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.9.1</version>
        <executions>
            <execution>
                <id>add-resource</id>
                <phase>generate-resources</phase>
                <goals>
                    <goal>add-resource</goal>
                </goals>
                <configuration>
                    <resources>
                        <resource>
                            <directory>src/resources/xml</directory>
                            <targetPath>xml</targetPath>
                        </resource>
                        <resource>
                            <directory>src/resources/json</directory>
                            <targetPath>json</targetPath>
                            <includes>
                                <include>include.json</include>
                            </includes>
                            <excludes>
                                <exclude>exclude.json</exclude>
                            </excludes>
                        </resource>
                    </resources>
                </configuration>
            </execution>
        </executions>
    </plugin>
```

##### Including and excluding source fles and folders
``` xml pom.xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.9.1</version>
        <executions>
            <execution>
                <id>add-source</id>
                <phase>generate-sources</phase>
                <goals>
                    <goal>add-source</goal>
                </goals>
                <configuration>
                    <sources>
                        <source>src/main/source</source>
                    </sources>
                </configuration>
            </execution>
        </executions>
    </plugin>
```
- The Build Helper Maven plugin provides a number of other goals that meet specifc project requirements.
    + attach-artifact: This is used to attach additional artifacts to be installed and/or deployed, besides the project artifact.
``` xml
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>1.9.1</version>
        <executions>
            <execution>
                <id>attach-artifacts</id>
                <phase>package</phase>
                <goals>
                    <goal>attach-artifact</goal>
                </goals>
                <configuration>
                    <artifacts>
                        <artifact>
                            <file>some file</file>
                            <type>extension of your file </type>
                            <classifier>optional</classifier>
                        </artifact>
                    </artifacts>
                </configuration>
            </execution>
        </executions>
    </plugin>
```
    + maven-version: This is used to set a property containing the current version of Maven, which can be used as required.
``` xml
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.9.1</version>
                <executions>
                    <execution>
                        <id>maven-version</id>
                        <goals>
                            <goal>maven-version</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <archive>
                        <manifestEntries>
                            <Maven-Version>${maven.version}</Maven-Version>
                        </manifestEntries>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>
```

##### Confguring Maven to search for plugins


##### Working in ofﬂine mode
- $mvn dependency:go-offline
- Add the following in the settings fle:<offline>true</offline>

##### Controlling the verbosity of the Maven output
- mvn –q clean package
- mvn –X clean package

##### Using the Maven Help plugin
- The Maven Help plugin provides different goals. These are also supported by IDEs
    + effective-pom: This displays the pom fle that will be used by Maven after applying inheritance, interpolation, and profles. This is useful to know the fnal pom fle when it is needed for troubleshooting.
    + all-profiles: This goal displays all the profles that are available for the project. It indicates whether the profles are active or not.
    + active-profiles: This goal displays the list of active profles. We explicitly enabled the dev profle (which was not active by default), so it showed up in the list of active profles.
- the describe goal, which is used to get details of any plugin.
    + $mvn help:describe -DgroupId=org.jacoco -DartifactId=jacoco-maven-plugin -Ddetail=true

##### Using the Maven SCM plugin

##### Generating changelogs for a site


<br>
<br>
#### Multi-module Projects

##### Understanding project inheritance
Maven provides a feature called project inheritance for this. Maven allows a number of elements specifed in the parent pom fle to be merged to the inheriting project.

##### Understanding project aggregation
Maven uses the term module to defne a child or subproject, which is part of a larger project. An aggregate project can build all the modules together.

##### Combining inheritance and aggregation


##### Performing multi-module dependency management
##### Performing multi-module plugin management
##### Selectively building modules
##### Reporting for multi-module projects


<br>
<br>
#### Java Development with Maven

##### Building a JAR project
##### Generating an executable JAR
##### Generating a JAR of the source code
##### Generating a JAR of the test classes
##### Building a WAR project
##### Building an EAR project
##### Building a pom project
##### Running a web project with Jetty
##### Running a web project with Tomcat

<br>
<br>
#### Advanced Maven Usage

##### Creating an assembly
##### Running a custom executable
##### Running an ANT task
##### Determining updates to Maven plugins
##### Determining updates to Maven dependencies
##### Controlling the constraints
##### Generating unique builds
##### Releasing a Maven project

<br>
<br>




<br>
<br>
#### pom.xml project object model
``` xml pom.xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <!-- defnes the version of this schema -->
    <modelVersion>4.0.0</modelVersion>

    <!-- The parent section is used to indicate a relationship, specifcally a parent-child relationship.
     | If the project is part of a multi-module project or inherits project information from another project,
     | then the details are specifed in this section: -->
    <parent>
        <!-- The combination of groupId, artifactId, and version uniquely identifes the project. -->
        <groupId>org.apache</groupId>
        <artifactId>apache</artifactId>
        <version>14</version>
    </parent>
    <!-- The groupId element is a unique identifer of the organization to which the project belongs. -->
    <groupId>org.apache.spark</groupId>
    <!-- The artifactId element is the name of the project. -->
    <artifactId>spark-core_2.11</artifactId>
    <!-- The version element is the specifc instance of the project, corresponding to the source code at a particular instance of time. -->
    <version>2.1.0</version>
    <!-- The packaging element indicates the artifact type of the project. This is typically a jar, war, zip, or in some cases, a pom: -->
    <packaging>pom</packaging>
    <!--  -->
    <name>Spark Project Parent POM</name>
    <!--  -->
    <url>http://spark.apache.org/</url>
    <!--  -->
    <licenses>
        <license>
            <name>Apache 2.0 License</name>
            <url>http://www.apache.org/licenses/LICENSE-2.0.html</url>
            <distribution>repo</distribution>
        </license>
    </licenses>
    <!--  -->
    <developers>
        <developer>
            <id>matei</id>
            <name>Matei Zaharia</name>
            <email>matei.zaharia@gmail.com</email>
            <url>http://www.cs.berkeley.edu/~matei</url>
            <organization>Apache Software Foundation</organization>
            <organizationUrl>http://spark.apache.org</organizationUrl>
        </developer>
    </developers>
    <!--  -->
    <prerequisites>
        <maven>${maven.version}</maven>
    </prerequisites>
    <!--  -->
    <mailingLists>
        <mailingList>
            <name>Dev Mailing List</name>
            <post>dev@spark.apache.org</post>
            <subscribe>dev-subscribe@spark.apache.org</subscribe>
            <unsubscribe>dev-unsubscribe@spark.apache.org</unsubscribe>
        </mailingList>
    </mailingLists>
    <!-- A project with modules is known as a multi-module or aggregator project.
     | Modules are projects that this pom fle lists and are executed as a group: -->
    <modules>
        <module>common/sketch</module>
        <module>common/network-common</module>
    </modules>
    <!-- Maven properties are placeholders. Their values are accessible anywhere in the pom fle by using ${key}, where key is the property name: -->
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java.version>1.7</java.version>
    </properties>
    <!--  -->
    <repositories>
        <repository>
            <id>public</id>
            <url>http://maven.chaosdata.com.cn/nexus/content/groups/public/</url>
            <name>Chaosdata Repository</name>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
    <!--  -->
    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <url>http://maven.chaosdata.com.cn/nexus/content/groups/public/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>

    <!-- The dependencies element section of the pom fle defnes all the dependent projects of this project.
     | This would typically be third-party libraries required to build, test, and run the project: -->
    <dependencies>
        <dependency>
            <groupId>org.spark-project.spark</groupId>
            <artifactId>unused</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>
    <!--  -->
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.apache.spark</groupId>
                <artifactId>spark-tags_${scala.binary.version}</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <!--  -->
    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>2.6</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                    <version>2.4.3</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <configuration>
                    <shadedArtifactAttached>false</shadedArtifactAttached>
                    <artifactSet>
                        <includes>
                            <include>org.spark-project.spark:unused</include>
                            <include>org.eclipse.jetty:jetty-io</include>
                            <include>org.eclipse.jetty:jetty-http</include>
                            <include>org.eclipse.jetty:jetty-proxy</include>
                            <include>org.eclipse.jetty:jetty-client</include>
                            <include>org.eclipse.jetty:jetty-continuation</include>
                            <include>org.eclipse.jetty:jetty-servlet</include>
                            <include>org.eclipse.jetty:jetty-servlets</include>
                            <include>org.eclipse.jetty:jetty-plus</include>
                            <include>org.eclipse.jetty:jetty-security</include>
                            <include>org.eclipse.jetty:jetty-util</include>
                            <include>org.eclipse.jetty:jetty-server</include>
                            <include>com.google.guava:guava</include>
                        </includes>
                    </artifactSet>
                    <relocations>
                        <relocation>
                            <pattern>org.eclipse.jetty</pattern>
                            <shadedPattern>${spark.shade.packageName}.jetty</shadedPattern>
                            <includes>
                                <include>org.eclipse.jetty.**</include>
                            </includes>
                        </relocation>
                        <relocation>
                            <pattern>com.google.common</pattern>
                            <shadedPattern>${spark.shade.packageName}.guava</shadedPattern>
                        </relocation>
                    </relocations>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>net.alchim31.maven</groupId>
                <artifactId>scala-maven-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    <!--  -->
    <profiles>
        <profile>
            <id>sbt</id>
            <dependencies>
                <dependency>
                    <groupId>com.google.guava</groupId>
                    <artifactId>guava</artifactId>
                    <scope>compile</scope>
                </dependency>
            </dependencies>
        </profile>
    </profiles>
</project>
```

#### settings.xml
``` xml settings.xml
<?xml version="1.0" encoding="UTF-8"?>

<!--
 |  1. User Level. ${user.home}/.m2/settings.xml    overridden CLI :-s /path/to/user/settings.xml
 |  2. Global Level. ${maven.home}/conf/settings.xml.   overridden CLI :-gs /path/to/global/settings.xml
 |-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <!-- localRepository
     | The path to the local repository maven will use to store artifacts.
     | Default: ${user.home}/.m2/repository
    -->
    <localRepository>D:\Repositories\Maven</localRepository>

    <!-- interactiveMode
     | This will determine whether maven prompts you when it needs input. If set to false,
     | maven will use a sensible default value, perhaps based on some other setting, for
     | the parameter in question.
     |
     | Default: true
    <interactiveMode>true</interactiveMode>
    -->

    <!-- offline
     | Determines whether maven should attempt to connect to the network when executing a build.
     | This will have an effect on artifact downloads, artifact deployment, and others.
     |
     | Default: false
    <offline>false</offline>
    -->

    <!-- pluginGroups
     | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.
     | when invoking a command line like "mvn prefix:goal". Maven will automatically add the group identifiers
     | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not already contained in the list.
     |-->
    <pluginGroups>
        <!-- pluginGroup
         | Specifies a further group identifier to use for plugin lookup.
        <pluginGroup>com.your.plugins</pluginGroup>
        -->
        <pluginGroup>org.mortbay.jetty</pluginGroup>
    </pluginGroups>

    <!-- proxies
     | This is a list of proxies which can be used on this machine to connect to the network.
     | Unless otherwise specified (by system property or command-line switch), the first proxy
     | specification in this list marked as active will be used.
     |-->
    <proxies>
        <!-- proxy
         | Specification for one proxy, to be used in connecting to the network.
         |
        <proxy>
          <id>optional</id>
          <active>true</active>
          <protocol>http</protocol>
          <username>proxyuser</username>
          <password>proxypass</password>
          <host>proxy.host.net</host>
          <port>80</port>
          <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
        </proxy>
        -->
    </proxies>

    <!-- servers
     | This is a list of authentication profiles, keyed by the server-id used within the system.
     | Authentication profiles can be used whenever maven must make a connection to a remote server.
     |-->
    <servers>
        <!-- server
         | Specifies the authentication information to use when connecting to a particular server, identified by
         | a unique name within the system (referred to by the 'id' attribute below).
         |
         | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are
         |       used together.
         |
        <server>
          <id>deploymentRepo</id>
          <username>repouser</username>
          <password>repopwd</password>
        </server>
        -->

        <!-- Another sample, using keys to authenticate.
        <server>
          <id>siteServer</id>
          <privateKey>/path/to/private/key</privateKey>
          <passphrase>optional; leave empty if not used.</passphrase>
        </server>
        -->
        <server>
            <id>releases</id>
            <username>ali</username>
            <password>ali</password>
        </server>
        <server>
            <id>Snapshots</id>
            <username>ali</username>
            <password>ali</password>
        </server>
    </servers>

    <!-- mirrors
     | This is a list of mirrors to be used in downloading artifacts from remote repositories.
     |
     | It works like this: a POM may declare a repository to use in resolving certain artifacts.
     | However, this repository may have problems with heavy traffic at times, so people have mirrored
     | it to several places.
     |
     | That repository definition will have a unique id, so we can create a mirror reference for that
     | repository, to be used as an alternate download site. The mirror site will be the preferred
     | server for that repository.
     |-->
    <mirrors>
        <!-- mirror
         | Specifies a repository mirror site to use instead of a given repository. The repository that
         | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
         | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
         |
        <mirror>
          <id>mirrorId</id>
          <mirrorOf>repositoryId</mirrorOf>
          <name>Human Readable Name for this Mirror.</name>
          <url>http://my.repository.com/repo/path</url>
        </mirror>
         -->
        <mirror>
            <!--This sends everything else to /public -->
            <id>nexus</id>
            <mirrorOf>*</mirrorOf>
            <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
        </mirror>
        <mirror>
            <!--This is used to direct the public snapshots repo in the
                profile below over to a different nexus group -->
            <id>nexus-public-snapshots</id>
            <mirrorOf>public-snapshots</mirrorOf>
            <url>http://maven.aliyun.com/nexus/content/repositories/snapshots/</url>
        </mirror>
    </mirrors>

    <!-- Repositories are remote collections of projects that Maven uses to populate the required dependencies to a local repository.  -->
    <!--<repositories>-->
    <!--<repository>-->
    <!--<id>codehausSnapshots</id>-->
    <!--<name>Codehaus Snapshots</name>-->
    <!--<releases>-->
    <!--<enabled>false</enabled>-->
    <!--<updatePolicy>always</updatePolicy>-->
    <!--<checksumPolicy>warn</checksumPolicy>-->
    <!--</releases>-->
    <!--<snapshots>-->
    <!--<enabled>true</enabled>-->
    <!--<updatePolicy>never</updatePolicy>-->
    <!--<checksumPolicy>fail</checksumPolicy>-->
    <!--</snapshots>-->
    <!--<url>http://snapshots.maven.codehaus.org/maven2</url>-->
    <!--<layout>default</layout>-->
    <!--</repository>-->
    <!--</repositories>-->

    <!-- the pluginRepositories element stores plugin libraries and associated fles. Maven distinguishes between these
     |  two by having separate confgurations for both. The elements are the same as that for
     |  repositories, except that the parent element is pluginRepositories.
     -->


    <!-- profiles
     | This is a list of profiles which can be activated in a variety of ways, and which can modify
     | the build process. Profiles provided in the settings.xml are intended to provide local machine-
     | specific paths and repository locations which allow the build to work in the local environment.
     |
     | For example, if you have an integration testing plugin - like cactus - that needs to know where
     | your Tomcat instance is installed, you can provide a variable here such that the variable is
     | dereferenced during the build process to configure the cactus plugin.
     |
     | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles
     | section of this document (settings.xml) - will be discussed later. Another way essentially
     | relies on the detection of a system property, either matching a particular value for the property,
     | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a
     | value of '1.4' might activate a profile when the build is executed on a JDK version of '1.4.2_07'.
     | Finally, the list of active profiles can be specified directly from the command line.
     |
     | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact
     |       repositories, plugin repositories, and free-form properties to be used as configuration
     |       variables for plugins in the POM.
     | 1. Per Project profle as defned in the pom fle of the project
     | 2. Per User profle as defned in the user settings fle (in the .m2 subfolder of the user's HOME folder)
     | 3. A Global profle as defned in the global settings fle (in the conf folder of M2_HOME)
     |
     | $mvn help:active-profiles
     | $mvn –P dev package
     |-->
    <profiles>
        <profile>
            <id>development</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
        <profile>
            <!--this profile will allow snapshots to be searched when activated-->
            <id>public-snapshots</id>
            <repositories>
                <repository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>development</activeProfile>
        <activeProfile>public-snapshots</activeProfile>
    </activeProfiles>
</settings>



<?xml version="1.0" encoding="utf-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="         http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <!--本地仓库。该值表示构建系统本地仓库的路径。其默认值为~/.m2/repository。 
        <localRepository>F:\apache-maven-3.0.4\dependy\repository</localRepository> 
    -->
    <!--Maven是否需要和用户交互以获得输入。如果Maven需要和用户交互以获得输入，则设置成true，反之则应为false。默认为true。 
        <interactiveMode>true</interactiveMode> 
    -->
    <mirrors>
        <!-- mirror | Specifies a repository mirror site to use instead of a given 
            repository. The repository that | this mirror serves has an ID that matches 
            the mirrorOf element of this mirror. IDs are used | for inheritance and direct 
            lookup purposes, and must be unique across the set of mirrors. | -->
        <mirror>
            <id>nexus-aliyun</id>
            <mirrorOf>central</mirrorOf>
            <name>Nexus aliyun</name>
            <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
        </mirror>
        <mirror>
            <id>net-cn</id>
            <mirrorOf>central</mirrorOf>
            <name>Nexus net</name>
            <url>http://maven.net.cn/content/groups/public/</url>
        </mirror>
    </mirrors>

    <profiles>
        <profile>
            <id>jdk-1.4</id>
            <activation>
                <jdk>1.4</jdk>
            </activation>
            <repositories>
                <repository>
                    <id>nexus</id>
                    <name>local private nexus</name>
                    <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>false</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>nexus</id>
                    <name>local private nexus</name>
                    <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>false</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>
    <!-- -->
    <activeProfiles>
        <activeProfile>nexus</activeProfile>
    </activeProfiles>
</settings>
```

#### maven command-line
1. -e –errors
2. -q –quiet    ：When the quiet option is enabled, only errors are displayed. The other outputs are not printed. This permits speeding up builds where verbose outputs are usually displayed
3. -v –version  
4. -o –offline  ：Maven does not attempt to download any dependency or plugin from the Internet. 
5. -X –debug
``` console
$ mvn -h

usage: mvn [options] [<goal(s)>] [<phase(s)>]

Options:
 -am,--also-make                        If project list is specified, also
                                        build projects required by the
                                        list
 -amd,--also-make-dependents            If project list is specified, also
                                        build projects that depend on
                                        projects on the list
 -B,--batch-mode                        Run in non-interactive (batch)
                                        mode (disables output color)
 -b,--builder <arg>                     The id of the build strategy to
                                        use
 -C,--strict-checksums                  Fail the build if checksums don't
                                        match
 -c,--lax-checksums                     Warn if checksums don't match
 -cpu,--check-plugin-updates            Ineffective, only kept for
                                        backward compatibility
 -D,--define <arg>                      Define a system property
 -e,--errors                            Produce execution error messages
 -emp,--encrypt-master-password <arg>   Encrypt master security password
 -ep,--encrypt-password <arg>           Encrypt server password
 -f,--file <arg>                        Force the use of an alternate POM
                                        file (or directory with pom.xml)
 -fae,--fail-at-end                     Only fail the build afterwards;
                                        allow all non-impacted builds to
                                        continue
 -ff,--fail-fast                        Stop at first failure in
                                        reactorized builds
 -fn,--fail-never                       NEVER fail the build, regardless
                                        of project result
 -gs,--global-settings <arg>            Alternate path for the global
                                        settings file
 -gt,--global-toolchains <arg>          Alternate path for the global
                                        toolchains file
 -h,--help                              Display help information
 -l,--log-file <arg>                    Log file where all build output
                                        will go (disables output color)
 -llr,--legacy-local-repository         Use Maven 2 Legacy Local
                                        Repository behaviour, ie no use of
                                        _remote.repositories. Can also be
                                        activated by using
                                        -Dmaven.legacyLocalRepo=true
 -N,--non-recursive                     Do not recurse into sub-projects
 -npr,--no-plugin-registry              Ineffective, only kept for
                                        backward compatibility
 -npu,--no-plugin-updates               Ineffective, only kept for
                                        backward compatibility
 -nsu,--no-snapshot-updates             Suppress SNAPSHOT updates
 -o,--offline                           Work offline
 -P,--activate-profiles <arg>           Comma-delimited list of profiles
                                        to activate
 -pl,--projects <arg>                   Comma-delimited list of specified
                                        reactor projects to build instead
                                        of all projects. A project can be
                                        specified by [groupId]:artifactId
                                        or by its relative path
 -q,--quiet                             Quiet output - only show errors
 -rf,--resume-from <arg>                Resume reactor from specified
                                        project
 -s,--settings <arg>                    Alternate path for the user
                                        settings file
 -t,--toolchains <arg>                  Alternate path for the user
                                        toolchains file
 -T,--threads <arg>                     Thread count, for instance 2.0C
                                        where C is core multiplied
 -U,--update-snapshots                  Forces a check for missing
                                        releases and updated snapshots on
                                        remote repositories
 -up,--update-plugins                   Ineffective, only kept for
                                        backward compatibility
 -v,--version                           Display version information
 -V,--show-version                      Display version information
                                        WITHOUT stopping build
 -X,--debug                             Produce execution debug output
```





##### 纪要
###### 跳过单元测试
1. -Dmaven.test.skip=true  不编译测试类
2. -DskipTests
3. 修改pom.xml
    ``` xml
    <plugin>    
        <groupId>org.apache.maven.plugin</groupId>    
        <artifactId>maven-compiler-plugin</artifactId>    
        <version>2.1</version>    
        <configuration>    
            <skip>true</skip>    
        </configuration>    
    </plugin>    
    <plugin>    
        <groupId>org.apache.maven.plugins</groupId>    
        <artifactId>maven-surefire-plugin</artifactId>    
        <version>2.5</version>    
        <configuration>    
            <skip>true</skip>    
        </configuration>    
    </plugin>    
    ```
4. pom.xml如下，跳过单元测试，会编译
    ``` xml
    <plugin>    
        <groupId>org.apache.maven.plugins</groupId>    
        <artifactId>maven-surefire-plugin</artifactId>    
        <version>2.5</version>    
        <configuration>    
            <skipTests>true</skipTests>    
        </configuration>    
    </plugin> 
    ```

### sbt
